<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webflow Copy</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div class="h-screen bg-black grid place-content-center">
        <div class="flex items-center space-x-3">
            <button id="copyButton" class="bg-white px-5 py-2 rounded-md" onclick="doCopy()">
                Copy to Webflow
            </button>
            <!-- <button class="px-5 py-2 bg-white rounded-md" onclick="copyComponent('RedDiv')">
                Copy Red Div
            </button> -->
        </div>
    </div>

    <script>
        window.addEventListener("load", async () => {
            const copiedStuff = await navigator.clipboard.readText();
            window.copiedComponent = copiedStuff;
        });

        document.addEventListener("copy", e => {
            let clipboardData = event.clipboardData || window.clipboardData || event.originalEvent.clipboardData;
            clipboardData.setData('application/json', window.copiedComponent);
            console.log("Copied component: ", window.copiedComponent);
            e.preventDefault();
            setTimeout(() => {
                alert("Stuff copied");
            }, 300);
        });

        function copyComponent(name) {
            window.copiedComponent = JSON.stringify(window.components[name]);
            // window.copiedComponent = window.components[name];
            document.execCommand("copy");
            console.log("Copied to clipboard:");
        }

        function doCopy() {
            document.execCommand("copy");
            console.log("Do Copy did its thing!");
        }
    </script>

    <script type="module">
        import RedDiv from "./components/red-div.js";
        window.components = {
            RedDiv
        }
    </script>
</body>

</html>